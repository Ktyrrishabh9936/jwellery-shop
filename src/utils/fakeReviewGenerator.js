// Fake review generator for realistic reviews
export const fakeReviewData = {
  names: [
    "Priya S.",
    "Anita M.",
    "Sneha R.",
    "Kavya P.",
    "Meera K.",
    "Riya J.",
    "Pooja L.",
    "Nisha T.",
    "Divya A.",
    "Shreya B.",
    "Anjali D.",
    "Neha G.",
    "Sakshi V.",
    "Aarti H.",
    "Manisha C.",
    "Deepika N.",
    "Swati F.",
    "Rekha W.",
    "Sunita Q.",
    "Geeta X.",
    "Madhuri Z.",
    "Shilpa Y.",
    "Preeti U.",
    "Kiran I.",
    "Sarah J.",
    "Emily R.",
    "Jessica M.",
    "Ashley K.",
    "Amanda L.",
    "Michelle T.",
    "Jennifer A.",
    "Lisa B.",
    "Karen D.",
    "Nancy G.",
    "Betty V.",
    "Helen H.",
    "Sandra C.",
    "Donna N.",
    "Carol F.",
    "Ruth W.",
    "Sharon Q.",
    "Michelle X.",
    "Laura Z.",
    "Sarah Y.",
    "Kimberly U.",
    "Deborah I.",
    "Dorothy O.",
    "Lisa E",
  ],

  positiveReviews: {
    5: [
      {
      title: "Full Paisa Vasool",
      comment: "Dekh ke laga paisa double vasool ho gaya, mast quality aur feel hai boss!"
    },
    {
      title: "Bindaas Design",
      comment: "Itna jhakaas design hai ki dost bhi pooch rahe â€˜kahan se liya?â€™"
    },
    {
      title: "Solid Banawatt",
      comment: "Bilkul solid piece bana hai, ekdum mast finishing!"
    },
    {
      title: "Jhakaas Packaging",
      comment: "Unbox karte hi feel aayi jaise gift khol raha hoon, pura mast wala vibe."
    },
    {
      title: "Dil Garden Garden",
      comment: "Dekhte hi dil garden garden ho gaya, mast piece hai yaar."
    },
    {
      title: "Asli Jadoo",
      comment: "Product dekha aur literally Munna Bhai jaisa bola â€“ Jadoo ki Jhappi!"
    },
    {
      title: "Mast Wali Vibe",
      comment: "Design dekh ke ekdum mast wali vibe aa gayi."
    },
    {
      title: "Shaandar Item",
      comment: "Bilkul shaandar, zabardast aur tikau lag raha hai. Mast hai!"
    },
    {
      title: "Dil Jeet Liya",
      comment: "Ekdum heart winning design, mast finishing, paisa vasool!"
    },
    {
      title: "Top Class",
      comment: "Quality top class hai, ekdum asli mast maal."
    },
    {
      title: "Mast Banawatt",
      comment: "Ek number finishing aur look, dil khush ho gaya."
    },
    {
      title: "Bhai Mast Hai",
      comment: "Seedha bolu toh â€“ bhai mast hai."
    },
    {
      title: "Biryani Level Satisfaction",
      comment: "Jaise Hyderabad ki biryani kha li ho, waise wali satisfaction di product ne."
    },
    {
      title: "Jhakkas Piece",
      comment: "Ek number piece, design dekh ke bola â€“ jhakkas!"
    },
    {
      title: "Zabardast Vibe",
      comment: "Zabardast piece, full mast wali vibe."
    },
    {
      title: "Full Mast",
      comment: "Seedha bolo toh â€“ full mast!"
    },
    {
      title: "Desi Swag",
      comment: "Bilkul desi swag wala design hai, mast dikhta hai."
    },
    {
      title: "Patience Reward",
      comment: "Wait kiya aur reward mast nikla. Paisa vasool!"
    },
    {
      title: "Chill Vibe",
      comment: "Piece dekh ke chill wali vibe aayi. Jhakaas hai!"
    },
    {
      title: "Ek Number",
      comment: "Design aur quality â€“ dono ek number!"
    },
    {
      title: "Asli Paisa Vasool",
      comment: "Asli mein paisa vasool product hai, no bakwaas."
    },
    {
      title: "Dil Se Review",
      comment: "Dil se keh raha hoon â€“ mast maal hai!"
    },
       {
      title: "Beautiful design",
      comment: "These are well-made and the design is nice, I'm very happy with them."
    },
    {
      title: "Excellent quality",
      comment: "The craftsmanship is outstanding and it feels very premium."
    },
    {
      title: "Absolutely stunning",
      comment: "They look even better in person than in pictures, I love them."
    },
    {
      title: "Great value",
      comment: "The quality and design are worth every penny, very satisfied."
    },
    {
      title: "Elegant and classy",
      comment: "Adds a touch of elegance to my look, exactly what I wanted."
    },
    {
      title: "Perfect gift",
      comment: "I bought this as a present and they loved it, great choice!"
    },
    {
      title: "Highly recommend",
      comment: "The details are beautiful, I would definitely buy again."
    },
    {
      title: "Lovely design",
      comment: "The style is unique and it catches everyoneâ€™s attention."
    },
    {
      title: "Premium feel",
      comment: "The finishing is smooth and it feels like luxury."
    },
    {
      title: "Timeless style",
      comment: "It has a classic charm that never goes out of fashion."
    },
    {
      title: "Well-crafted",
      comment: "You can tell a lot of effort went into making this, very impressed."
    },
    {
      title: "Shiny and bright",
      comment: "The sparkle is amazing and looks gorgeous in the light."
    },
    {
      title: "Great purchase",
      comment: "I'm really happy with my decision, worth every bit."
    },
    {
      title: "Unique piece",
      comment: "It stands out and I always get compliments when I wear it."
    },
    {
      title: "Perfect fit",
      comment: "It feels made just for me, very comfortable and stylish."
    },
    {
      title: "Beautiful craftsmanship",
      comment: "The details are intricate and the finish is perfect."
    },
    {
      title: "Chic and modern",
      comment: "It has a trendy look while still being elegant."
    },
    {
      title: "Delightful purchase",
      comment: "It exceeded my expectations, Iâ€™m really delighted."
    },
    {
      title: "Eye-catching",
      comment: "Every time I wear it, people ask me where I got it from."
    },
    {
      title: "Looks amazing",
      comment: "Honestly, I didnâ€™t expect it to look this good in real life. Super happy with it!"
    },
    {
      title: "Exactly what I wanted",
      comment: "The design is simple yet classy, and it goes with everything I wear."
    },
    {
      title: "So pretty",
      comment: "Itâ€™s even prettier than the photos online. I keep staring at it."
    },
    {
      title: "Great everyday piece",
      comment: "Lightweight and stylish, Iâ€™ve been wearing it almost every day."
    },
    {
      title: "Impressed",
      comment: "The details are really nice and the finish feels very premium."
    },
    {
      title: "Love it",
      comment: "Such a cute design, I instantly fell in love the moment I opened the box."
    },
    {
      title: "Perfect for me",
      comment: "Fits my style perfectly. Iâ€™ve already gotten a couple of compliments."
    },
    {
      title: "Better than expected",
      comment: "I wasnâ€™t sure at first, but wowâ€¦ itâ€™s absolutely gorgeous in person."
    },
    {
      title: "Stylish",
      comment: "It has that modern look I love, but still feels timeless."
    },
    {
      title: "Happy customer",
      comment: "Arrived quickly, looks amazing, and feels comfortable. Canâ€™t ask for more."
    },
    {
      title: "Eye-catcher",
      comment: "Every time I wear it, someone notices and says something nice."
    },
    {
      title: "Quality feels great",
      comment: "It doesnâ€™t feel cheap at all, you can tell itâ€™s well-made."
    },
    {
      title: "My new favorite",
      comment: "Iâ€™ve bought a few pieces before, but this one is definitely my favorite."
    },
    {
      title: "Gifted and loved",
      comment: "Bought this as a gift and they couldnâ€™t stop smiling when they got it."
    },
    {
      title: "Matches everything",
      comment: "I love how versatile it is â€” I can wear it with casual or dressy outfits."
    },
    {
      title: "Feels special",
      comment: "Thereâ€™s something unique about it, I feel good every time I put it on."
    },
    {
      title: "Lovely details",
      comment: "The little details really make it stand out. Looks way more expensive than it is."
    },
    {
      title: "Simple and elegant",
      comment: "Not too flashy, but still makes a statement. Just right for me."
    },
    {
      title: "Wore it right away",
      comment: "Couldnâ€™t wait, I wore it as soon as it arrived and havenâ€™t taken it off since."
    },
    {
      title: "Totally worth it",
      comment: "Honestly, for the price and quality, this was such a good buy."
    },
    {
      title: "Love it!",
      comment: "Super cute and exactly my style."
    },
    {
      title: "So pretty",
      comment: "Looks amazing and I wear it all the time."
    },
    {
      title: "Great buy",
      comment: "Totally worth the money, feels premium."
    },
    {
      title: "Obsessed",
      comment: "Canâ€™t stop looking at it, Iâ€™m obsessed."
    },
    {
      title: "Perfect",
      comment: "Just the right mix of classy and modern."
    },
    {
      title: "My fave",
      comment: "This instantly became my favorite piece."
    },
    {
      title: "Wow",
      comment: "Even better than the photos, Iâ€™m impressed."
    },
    {
      title: "Everyday wear",
      comment: "Light and comfy, I use it daily."
    },
    {
      title: "So stylish",
      comment: "Matches literally everything I own."
    },
    {
      title: "Gifted",
      comment: "Gave it as a gift, and they loved it."
    },
    {
      title: "Shiny",
      comment: "Sparkles so beautifully in the light."
    },
    {
      title: "Cute",
      comment: "Simple, cute, and super versatile."
    },
    {
      title: "Chic",
      comment: "Has that trendy look I was going for."
    },
    {
      title: "Happy",
      comment: "Made me smile the moment I opened it."
    },
    {
      title: "Go-to",
      comment: "My new go-to piece, I barely take it off."
    },
    {
      title: "Adorable",
      comment: "Small, cute, and just perfect for me."
    },
    {
      title: "Compliments",
      comment: "People keep asking me where I got it."
    },
    {
      title: "Classy",
      comment: "Minimal but elegant, exactly my vibe."
    },
    {
      title: "Quick fav",
      comment: "Instant favorite, I wear it nonstop."
    },
    {
      title: "Lovely",
      comment: "Honestly, itâ€™s just so lovely to have."
    }

    ],
    4: [
     {
      title: "Very comfortable",
      comment: "Feels light and comfortable to wear all day long."
    },
    {
      title: "Patience pays",
      comment: "Delivery took longer than I thought, but honestly, the wait was worth it."
    },
    {
      title: "Oops but fixed",
      comment: "Got the wrong order first, but customer service sorted it quickly. Freebie included, not complaining!"
    },
    {
      title: "Drama with a happy ending",
      comment: "Had a minor issue, thought it would be a nightmare, but it actually turned out pretty smooth."
    },
    {
      title: "Unexpected upgrade",
      comment: "My order was delayed, but they upgraded me with a discount. Not bad at all."
    },
    {
      title: "From frustration to fascination",
      comment: "At first I was annoyed about the delayâ€¦ then I opened the package and forgot all about it."
    },
    {
      title: "Tiny hiccup",
      comment: "Packaging was a little messed up, but the piece inside? Flawless."
    },
    {
      title: "Worth the emails",
      comment: "Had to send a couple of emails to sort an issue, but the replacement piece is gorgeous."
    },
    {
      title: "Not perfect, but close",
      comment: "Minor scratch on arrival, but they sent me a new one without hassle."
    },
    {
      title: "Mixed feelings",
      comment: "Didnâ€™t love the delivery speed, but the quality won me over instantly."
    },
    {
      title: "Customer care surprise",
      comment: "Expected a fight for a replacement, but they handled it politely and fast."
    },
    {
      title: "Turned into a win",
      comment: "Started with a problem, ended with a discount voucher and a great product."
    },
    {
      title: "Honest mistake fixed",
      comment: "Wrong color delivered, but they quickly sent me the right one. Happy ending!"
    },
    {
      title: "Delayed happiness",
      comment: "Waited a bit too long, but when it finally arrived, I couldnâ€™t stop smiling."
    },
    {
      title: "Smooth resolution",
      comment: "Had a sizing issue, and they replaced it without any extra cost. Nice!"
    },
    {
      title: "First annoyed, then impressed",
      comment: "Thought it was going to be a bad experience, but they really turned it around."
    },
    {
      title: "A bit of a rollercoaster",
      comment: "Started with stress, ended with joy. Guess thatâ€™s customer service done right."
    },
    {
      title: "Minor flaw, major fix",
      comment: "Found a defect, but they sent me a new one plus a coupon. Canâ€™t complain."
    },
    {
      title: "Better than expected",
      comment: "Had low expectations after a small hiccup, but they exceeded them in the end."
    },
    {
      title: "Plot twist",
      comment: "I was ready to rage about late delivery, then it arrivedâ€¦ now I canâ€™t shut up about how good it looks."
    },
    {
      title: "Free therapy",
      comment: "Customer care heard all my complaints like a therapistâ€¦ and then sent me a discount. Healing complete."
    },
    {
      title: "Drama resolved",
      comment: "My order went missing, thought it was gone foreverâ€¦ but it came back with an apology gift. Bollywood level twist!"
    },
    {
      title: "From zero to hero",
      comment: "First I got the wrong piece. Then they fixed it fast. Now I feel like theyâ€™re my favorite brand ever."
    },
    {
      title: "Patience test",
      comment: "Waited longer than my Amazon packageâ€¦ but hey, this one actually impressed me."
    },
    {
      title: "Bribed with discounts",
      comment: "I was ready to post a bad review, then they sent me a coupon. Guess whoâ€™s buying again? ðŸ˜‚"
    },
    {
      title: "Emotional rollercoaster",
      comment: "Anger, disappointment, joy, satisfactionâ€¦ all in one shopping experience."
    },
    {
      title: "Instant redemption",
      comment: "Got a broken piece at first. They replaced it so fast I almost feel guilty for being mad."
    },
    {
      title: "Customer care MVPs",
      comment: "Honestly, the product is greatâ€¦ but the support team deserves their own award show."
    },
    {
      title: "Expectation vs Reality",
      comment: "Expected an apology email. Got a replacement + freebie instead. Not bad, not bad at all."
    },
    {
      title: "Late but lovely",
      comment: "It came fashionably lateâ€¦ like a celebrity. I forgave instantly."
    },
    {
      title: "Accidental upgrade",
      comment: "They messed up my order, then sent me a better one as compensation. Mistakes I like!"
    },
    {
      title: "Complained my way to happiness",
      comment: "One angry email later, I ended up with a replacement and a coupon. Worth the drama."
    },
    {
      title: "Testing my patience",
      comment: "They made me waitâ€¦ but now I canâ€™t stop showing it off, so Iâ€™ll allow it."
    },
    {
      title: "Oops but cute",
      comment: "Packaging was a mess, but what was inside? Absolute perfection."
    },
    {
      title: "From rant to rave",
      comment: "Drafted a bad review, deleted it after unboxing. This is emotional blackmail."
    },
    {
      title: "Discount diplomacy",
      comment: "They literally ended my anger with 20% off. Genius customer service strategy."
    },
    {
      title: "Not smooth, but sweet",
      comment: "There were bumps along the way, but in the end Iâ€™m smiling with my shiny new piece."
    },
    {
      title: "Chaos with benefits",
      comment: "Wrong order, late delivery, replacementâ€¦ plus discount voucher. Basically a shopping adventure."
    },
    {
      title: "Happy ending",
      comment: "The journey was messy, but the product is amazing. Feels like a rom-com plot."
    },
    {
      title: "Late Entry, Hero Performance",
      comment: "Delivery thoda Bollywood villain jaisa late tha, par product hero nikla."
    },
    {
      title: "Overacting Customer Care",
      comment: "Complaint kari toh itni taareef aur discount de diye jaise main VIP hoon ðŸ˜…."
    },
    {
      title: "Timepass Delay",
      comment: "Delivery ne patience test liya, par jo aaya woh asli dhamaka nikla."
    },
    {
      title: "Bakchod Complaint",
      comment: "Thoda defective nikla, complaint daaliâ€¦ saamne se free coupon. Mazaa hi aa gaya."
    },
    {
      title: "Hero Entry",
      comment: "Late aaya but jaise hero last scene mein entry maar ke sab jeet leta hai."
    },
    {
      title: "Jhakaas Fix",
      comment: "Pehle galat piece bhej diya, phir asli bhejaâ€¦ upar se discount bhi. Setting mast hai."
    },
    {
      title: "LOL Complaint",
      comment: "Complaint likhne gaya tha, par product dekh ke hassna hi aaya â€“ itna cute hai!"
    },
    {
      title: "Over Smart Replacement",
      comment: "Galti unki thi, par replacement aur coupon aisa diya ki fan ban gaya."
    },
    {
      title: "Zara Late but Mast",
      comment: "Thoda late hua, par jo aaya mast ka mast tha."
    },
    {
      title: "Complaint = Free Gift",
      comment: "Mere complaint ka result â€“ naya piece + coupon. Paisa vasool drama!"
    },
    {
      title: "LOL Delivery Scene",
      comment: "Delivery slow thi, par product ne pura scene palat diya."
    },
    {
      title: "Paisa Vasool Drama",
      comment: "Pehle gussa, phir discount, ab main brand ka fan. Full drama film!"
    },
    {
      title: "Solid Entry",
      comment: "Delivery entry thoda filmy thi, par andar ka maal ekdum solid."
    },
    {
      title: "Happy Ending",
      comment: "Journey thodi dramatic thi, par happy ending mili â€“ mast wala ending."
    },
    {
      title: "Gussa Se Khushi",
      comment: "Gussa aya delay pe, par product dekh ke khushi double ho gayi."
    },
    {
      title: "Angry to LOL",
      comment: "Angry review likhne gaya tha, par mast discount mila toh LOL hogaya."
    },
    {
      title: "Heroic Support",
      comment: "Customer care ne aise handle kiya jaise hero villain se lad raha ho."
    },
    {
      title: "Late Night Hero",
      comment: "Delivery raat ko aayi, par asli hero nikla product."
    },
    {
      title: "Cute Confusion",
      comment: "Galat color bheja, replacement itna cute bheja ki gussa hi gayab."
    },
    {
      title: "Bollywood Ending",
      comment: "Pura shopping experience ek Bollywood movie jaisa tha â€“ drama, twist, aur happy ending."
    },
    {
      title: "Rona Se Hasi",
      comment: "Pehle rona aya delay pe, phir hasi aayi dekh ke â€“ mast nikla!"
    },
    {
      title: "Apna Time Aayega",
      comment: "Delivery ne bola apna time aayega, aur aaya bhi â€“ mast piece ke saath."
    },
    {
      title: "Solid Drama",
      comment: "Thoda filmy drama hua, par product ne pura paisa vasool kar diya."
    },
    {
      title: "LOL Deal",
      comment: "Galti unki thi, deal mast ban gayi mere liye. LOL!"
    },
    {
      title: "Thoda Idhar Udhar",
      comment: "Packaging idhar-udhar thi, par andar ka piece ekdum zabardast."
    },
    {
      title: "Comedy Ending",
      comment: "Complaint ne ekdum comedy ending di â€“ naya piece + coupon. Mazaa hi aa gaya."
    },
    {
      title: "Thoda Filmy",
      comment: "Shopping journey thodi filmy thi, par mast ka mast ending."
    }

    ],
  },

  neutralReviews: {
    3: [
      {
    title: "Thoda Filmy",
    comment: "Shopping journey thodi filmy thi, par mast ka mast ending."
  },
  {
    title: "Late but Okay",
    comment: "Delivery ne patience test liya, par product decent nikla."
  },
  {
    title: "Average Quality",
    comment: "Design achha hai but finishing utni mast nahi thi."
  },
  {
    title: "Replacement Worked",
    comment: "Pehla piece defective tha, replacement aaya toh thoda better laga."
  }, {
    title: "Instant refund",
    comment: "I received broken jewelry, but I made complaints and got my refund."
  },
  {
    title: "Satisfying customer care response",
    comment: "I made complaint and got resolved in a week and got a new piece with offer."
  },
  {
    title: "Okay but delayed",
    comment: "The product was fine but delivery took too long, average experience."
  },
  {
    title: "Good replacement policy",
    comment: "First item was defective, but they replaced it quickly without much hassle."
  }

    ],
  },

  negativeReviews: {
    2: [
      {
    title: "Poor packaging",
    comment: "The product was fine but packaging was so bad it almost broke."
  },
  {
    title: "Not as expected",
    comment: "Looked premium in photos but actual product quality was disappointing."
  },
  {
    title: "Late and careless delivery",
    comment: "Delivery guy handled it roughly, box was crushed though product survived."
  },
   {
    title: "Poor Packaging",
    comment: "Box dekh ke laga doodh ka packet bheja hai, andar ka product bas theek thaak."
  },
  {
    title: "Not Like Photos",
    comment: "Website pe toh mast dikha, haath me aaya toh thoda dull nikla."
  },
  {
    title: "Late Lateef",
    comment: "Delivery itni late thi ki mood hi off ho gaya, product bas average nikla."
  }

    ],
    1: [
     {
    title: "Broken Piece",
    comment: "Box khola toh jewelry already broken thi, full disappointment."
  },
  {
    title: "Worst Service",
    comment: "Customer care bas promises karta raha, na refund mila na replacement."
  },
  {
    title: "Bakwaas Quality",
    comment: "Ekdum cheap material nikla, paisa totally waste."
  },
   {
    title: "Worst experience",
    comment: "Jewelry broke in just 2 days, total waste of money."
  },
  {
    title: "Damaged piece received",
    comment: "Opened the box and found a cracked piece, no proper checking done."
  },
  {
    title: "Terrible service",
    comment: "Neither refund nor replacement was provided, very poor customer care."
  }

    ],
  },
}

export function generateFakeReviews(productId) {
  const reviews = []
  const count =  Math.floor(Math.random() * (20 - 8 + 1)) + 8;
  const { names, positiveReviews, neutralReviews, negativeReviews } = fakeReviewData

  // Rating distribution (more positive reviews)
  const ratingDistribution = [5, 5, 5, 5, 5, 5, 4, 4, 4, 3, 2] // 55% 5-star, 27% 4-star, 9% 3-star, 9% 2-star

  for (let i = 0; i < count; i++) {
    const rating = ratingDistribution[Math.floor(Math.random() * ratingDistribution.length)]
    let reviewData

    if (rating === 5) {
      reviewData = positiveReviews[5][Math.floor(Math.random() * positiveReviews[5].length)]
    } else if (rating === 4) {
      reviewData = positiveReviews[4][Math.floor(Math.random() * positiveReviews[4].length)]
    } else if (rating === 3) {
      reviewData = neutralReviews[3][Math.floor(Math.random() * neutralReviews[3].length)]
    } else if (rating === 2) {
      reviewData = negativeReviews[2][Math.floor(Math.random() * negativeReviews[2].length)]
    } else {
      reviewData = negativeReviews[1][Math.floor(Math.random() * negativeReviews[1].length)]
    }

    const review = {
      productId,
      reviewerName: names[Math.floor(Math.random() * names.length)],
      rating,
      title: reviewData.title,
      comment: reviewData.comment,
      isVerifiedPurchase: Math.random() > 0.3, // 70% verified purchases
      reviewDate: new Date(Date.now() - Math.floor(Math.random() * 90) * 24 * 60 * 60 * 1000), 
    }

    reviews.push(review)
  }

  return reviews
}

export function calculateRatingDistribution(reviews) {
  const distribution = { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 }

  reviews.forEach((review) => {
    distribution[review.rating]++
  })

  return distribution
}

export function calculateAverageRating(reviews) {
  if (reviews.length === 0) return 0

  const totalRating = reviews.reduce((sum, review) => sum + review.rating, 0)
  return Number((totalRating / reviews.length).toFixed(1))
}

export async function updateProductRatingStats(productId) {
  const Review = require("@/models/reviewModel").default
  const Product = require("@/models/productModel").default

  try {
    const reviews = await Review.find({ productId })
    const totalReviews = reviews.length
    const averageRating = calculateAverageRating(reviews)
    const ratingDistribution = calculateRatingDistribution(reviews)

    await Product.findByIdAndUpdate(productId, {
      totalReviews,
      averageRating,
      ratingDistribution,
      numReviews: totalReviews, // For backward compatibility
    })

    return { totalReviews, averageRating, ratingDistribution }
  } catch (error) {
    console.error("Error updating product rating stats:", error)
    throw error
  }
}
